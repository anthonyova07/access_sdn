<html>

<head>
    <title>Add User</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="static/css/style.css" rel="stylesheet" media="screen">
</head>

<body style="background:#f8f8f8; margin:0; padding:0;">
    <nav>
        <h1 class="logo"><img src="static/res/logo_ad.png" width="250" height="110"></h1>
    </nav>

    <div class="main">
        <span class="left_section">
                <h3>Add User Details</h3>
      <br>
      <form action="" method="post" style="text-align:left;">
          <ul>
              <li class="mtitles">Username</li>
              <li style="width:310px;"><input type="text" placeholder="Username" name="username" value="{{request.form.username }}"></li>
          </ul>
          <ul>
              <li  class="mtitles">Password</li>
              <li style="width:310px;"><input type="password" placeholder="Password" name="password" value="{{request.form.password }}"></li>
          </ul>
          <ul>
              <li  class="mtitles">User Group</li>
              <li style="width:310px;">
                <select name="user_group">
                  <option>Employee</option>
                  <option>Guest</option>
                </select>

                <!--<input type="text" placeholder="Guest/Employee"  value="{{request.form.user_group }}"></li-->
          </ul>
          <ul>
              <li class="mtitles">Evict Time</li>
              <li style="width:310px;"><input type="text" placeholder="in secs" name="evict_time" value="{{request.form.evict_time }}"></li>
          </ul>
        
        
<!--           <input type="text" placeholder="id" name="id" value="{{
          request.form.username }}">
         <input type="password" placeholder="Password" name="password" value="{{
          request.form.password }}"> --><br>
        <input class="btn btn-default" type="submit" value="Add User">
      </form>
      {% if error %}
        <p class="error"><strong>Error:</strong> {{ error }}
      {% endif %}
    </h3>
      <!--p>Click <a href="/server_add">here</a> to add server details.</p>
      <p>Click <a href="/user_delete">here</a> to manage users.</p-->
            <h5><button onClick="window.location='/server_add'"  style="position:relative;left:-18px;">Add server details</button></h5>
            <h5><button onClick="window.location='/user_delete'"  style="position:relative;left:-18px;">Manage Users</button></h5>
     </span>


        <span class="right_section">

            <ul class="nav nav-tabs">
                <li class="active"><a data-toggle="tab" href="#add_user">Lista de usuarios</a></li>
                <li><a data-toggle="tab" href="#manage_request">Administrar solicitudes</a></li>
              </ul>

        <div class="tab-content">
          <div id="add_user" class="tab-pane fade in active">
                <table border="0"  cellspacing="0" cellpadding="0" style="width:100%; border-bottom:1px solid #d8d8d8;">
                <thead>
                    <tr>
                      <th class="add_user_list">Name</th>
                      <th class="add_user_list">Password</th>
                      <th class="add_user_list">User Group</th>
                      <th class="add_user_list">Evict time</th>
                      <th class="add_user_list">OS Type</th>
                      <th class="add_user_list">IP Address</th>
                      <th class="add_user_list">Status</th>
        <!--                <th>Pin</th> -->
                    </tr>
                </thead>
                <tbody>
                      {% for item in items %}
                      <tr>
                      {% for i in item %}
                            <td class="add_user_addedlist">{{ i }}</td>

                      {% endfor %}
                    </tr>
                      {% endfor %}
                  </tbody>
              </table>
         </div>

         <div id="manage_request" class="tab-pane fade">
            <table id="request_table" class="table table-hover table-bordered table-sm table-striped">

                <!-- <table border="0"  cellspacing="0" cellpadding="0" style="width:100%; border-bottom:1px solid #d8d8d8;"> -->
                <thead>
                    <tr>
                        <th class="add_user_list" width="20%" scope="col" id="user">user</th>
                        <th class="add_user_list" width="20%" scope="col" id="solicitud">request url</th>
                        <th class="add_user_list" width="20%" scope="col" id="motivo">motivo</th>
                        <th class="add_user_list" width="20%" scope="col" id="tiempodesde">Evict time desde</th>
                        <th class="add_user_list" width="20%" scope="col" id="tiempohasta">Evict time hasta</th>
                    </tr>
                </thead>
                <tbody class="col-md-12" id="body-solicitud">
                    
                </tbody>
            </table>
          </div>




    </div>

            </span>




    </div>

    <script type="text/javascript">
        var eventOutputContainer = document.getElementById("event");
        var evtSrc = new EventSource("/sus");

        evtSrc.onmessage = function(e) {
            console.log(e.data);
            var datos = JSON.parse(e.data);
            console.log("Los datos son:", datos)
                // Find a <table> element with id="myTable":
            var table = document.getElementById("request_table");
            var arrdatos = [datos.user, datos.pagina, datos.motivo, datos.tiempodesde, datos.tiempohasta]

            var tr = document.createElement("tr");



            arrdatos.forEach(element => {
                var txt = document.createTextNode(element);
                var td = document.createElement("td");
                td.appendChild(txt);
                // td.classList.add("col-md-2");
                td.classList.add("add_user_list");

                tr.appendChild(td);
            });

            table.appendChild(tr);
            console.log('------------------------------------');
            console.log();
            console.log('------------------------------------');

            var comentarios = {
                // // // Add some text to the new cells:
                // // cell1.innerHTML = datos.user;
                // // cell2.innerHTML = datos.pagina;
                // // cell3.innerHTML = datos.motivo;
                // // cell4.innerHTML = tiempodesde;
                // // cell5.innerHTML = tiempohasta;
                // var txt = document.createTextNode(datos.user);
                // var td = document.createElement("td");


                // td.appendChild(txt);
                // tr.appendChild(td);
                // table.appendChild(tr)
                // // Create an empty <tr> element and add it to the 1st position of the table:
                // var row = table.insertRow(1);

                // // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                // var cell1 = row.insertCell(0);
                // var cell2 = row.insertCell(1);
                // var cell3 = row.insertCell(2);
                // var cell4 = row.insertCell(3);
                // var cell5 = row.insertCell(4);


                // // cell1.classList.add("add_user_addedlist");
                // // cell2.classList.add("add_user_addedlist");
                // // cell3.classList.add("add_user_addedlist");
                // // cell3.classList.add("add_user_addedlist");
                // // cell4.classList.add("add_user_addedlist");

                // cell1.classList.add("col-md-2");
                // cell2.classList.add("col-md-2");
                // cell3.classList.add("col-md-2");
                // cell4.classList.add("col-md-2");
                // cell5.classList.add("col-md-2");

                // tiempodesde = new Date(datos.tiempodesde);
                // tiempohasta = new Date(datos.tiempohasta);

                // // Add some text to the new cells:
                // cell1.innerHTML = datos.user;
                // cell2.innerHTML = datos.pagina;
                // cell3.innerHTML = datos.motivo;
                // cell4.innerHTML = tiempodesde;
                // cell5.innerHTML = tiempohasta;

                // // cell4.innerHTML = '<button type="button" class="btn btn-outline-success">Aceptar</button>' + '<button type="button" class="btn btn-danger">Danger</button>'

            }


        };
        console.log("Escuchando los clientes");
    </script>


</body>

</html>